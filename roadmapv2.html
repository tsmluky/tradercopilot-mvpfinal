<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TraderCopilot ¬∑ Roadmap Unificado A+</title>
    <style>
        :root {
            --primary: #2563EB;
            --primary-dark: #1E40AF;
            --bg: #F3F4F6;
            --card-bg: #FFFFFF;
            --text-main: #111827;
            --text-muted: #6B7280;
            --border: #E5E7EB;
            --success: #059669;
            --warning: #D97706;
            --danger: #DC2626;
        }

        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background-color: var(--bg);
            color: var(--text-main);
            margin: 0;
            padding: 40px;
            line-height: 1.6;
        }

        .container {
            max-width: 960px;
            margin: 0 auto;
        }

        /* Header */
        header {
            text-align: center;
            margin-bottom: 50px;
        }
        h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            color: var(--primary-dark);
        }
        .subtitle {
            font-size: 1.2rem;
            color: var(--text-muted);
        }

        /* Cards */
        .card {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            border: 1px solid var(--border);
        }

        .section-header {
            display: flex;
            align-items: center;
            border-bottom: 2px solid var(--bg);
            padding-bottom: 15px;
            margin-bottom: 20px;
        }
        
        .section-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin: 0;
        }

        /* Guardrails */
        .guardrails {
            border-left: 6px solid var(--danger);
            background-color: #FEF2F2;
        }
        .guardrails h2 { color: #991B1B; }
        .guardrails ul { list-style-type: none; padding: 0; }
        .guardrails li { 
            padding: 8px 0;
            border-bottom: 1px solid #FECACA;
            color: #7F1D1D;
            display: flex;
            align-items: start;
        }
        .guardrails li:last-child { border-bottom: none; }
        .guardrails li::before {
            content: "üõ°Ô∏è";
            margin-right: 12px;
        }

        /* Milestones */
        .milestone {
            margin-bottom: 40px;
            position: relative;
            padding-left: 20px;
            border-left: 3px solid var(--border);
        }
        
        .milestone-header {
            margin-bottom: 15px;
        }
        
        .milestone-title {
            font-size: 1.3rem;
            color: var(--primary);
            font-weight: 700;
        }
        
        .milestone-goal {
            font-style: italic;
            color: var(--text-muted);
            margin-bottom: 15px;
            display: block;
        }

        .epic {
            background: #F9FAFB;
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 15px;
        }
        
        .epic-title {
            font-weight: 700;
            margin-bottom: 10px;
            color: var(--text-main);
            display: flex;
            justify-content: space-between;
        }

        .dod-box {
            background: #ECFDF5;
            border: 1px solid #A7F3D0;
            color: #065F46;
            padding: 10px 15px;
            border-radius: 6px;
            margin-top: 15px;
            font-size: 0.9rem;
            font-weight: 600;
        }
        .dod-box::before { content: "‚úÖ DoD: "; }

        /* Backlog Table */
        .backlog-group { margin-bottom: 30px; }
        .backlog-group h3 { 
            color: var(--text-muted); 
            text-transform: uppercase; 
            font-size: 0.9rem; 
            letter-spacing: 1px;
            border-bottom: 1px solid var(--border);
            padding-bottom: 5px;
        }

        .ticket-item {
            display: flex;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid var(--bg);
        }
        
        .ticket-id {
            background: #DBEAFE;
            color: var(--primary-dark);
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: 700;
            margin-right: 15px;
            min-width: 40px;
            text-align: center;
        }
        
        .ticket-check {
            margin-right: 15px;
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        /* Exit Criteria */
        .exit-criteria {
            border: 2px solid var(--warning);
            background-color: #FFFBEB;
        }
        .exit-criteria h2 { color: #92400E; }

        @media print {
            body { background: white; padding: 0; }
            .container { max-width: 100%; }
            .card { box-shadow: none; border: 1px solid #ccc; break-inside: avoid; }
        }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>TraderCopilot</h1>
        <div class="subtitle">Roadmap Unificado ‚ÄúA+‚Äù (Sale-Ready + Paper Trading + Admin)</div>
    </header>

    <div class="card guardrails">
        <div class="section-header">
            <h2 class="section-title">üõ°Ô∏è Guardarra√≠les (Anti-Scope-Creep)</h2>
        </div>
        <p><strong>REGLA DE ORO:</strong> Esto se imprime y se pega en el repo. Todo lo que no encaje aqu√≠, se pospone.</p>
        <ul>
            <li>No ejecuci√≥n real con exchanges antes de vender (CCXT trade placement OFF).</li>
            <li>DB es la fuente √∫nica de verdad. CSV solo export/backup, nunca runtime truth.</li>
            <li>Multi-tenant ‚Äúlite‚Äù: user_id en todo lo relevante, pero UI puede ser simple.</li>
            <li>Paper Trading s√≠, pero m√≠nimo impecable (no un broker completo).</li>
            <li>Notificaciones: Telegram antes que push m√≥vil.</li>
            <li>‚ÄúMarketplace‚Äù se vende como config de personas, no como tienda con pagos internos.</li>
            <li>Nada de backtesting heavy / Jesse / optimizaci√≥n como parte de la venta.</li>
        </ul>
    </div>

    <div class="card">
        <div class="section-header">
            <h2 class="section-title">üìç Milestones (Salidas Verificables)</h2>
        </div>

        <div class="milestone">
            <div class="milestone-header">
                <div class="milestone-title">M0 ‚Äî Contrato de Realidad y Demo Path</div>
                <span class="milestone-goal">Objetivo: eliminar ambig√ºedad y alinear docs, UI y backend.</span>
            </div>
            <div class="epic">
                <strong>Entregables:</strong> Matriz Implemented/Partial/Planned, ‚ÄúDemo Path‚Äù oficial, ‚ÄúKill List‚Äù de claims.
                <div class="dod-box">Puedes hacer una demo end-to-end sin explicar ‚Äúbueno esto est√° a medias‚Äù.</div>
            </div>
        </div>

        <div class="milestone">
            <div class="milestone-header">
                <div class="milestone-title">M1 ‚Äî Core Hardening</div>
                <span class="milestone-goal">Objetivo: que el sistema sea confiable y operable tras reinicios/deploys.</span>
            </div>
            <div class="epic">
                <div class="epic-title">Epic M1.1 ‚Äî DB como Single Source of Truth</div>
                Migraciones (Alembic), Esquema versionado. CSV solo export.
                <div class="dod-box">No hay flujo donde ‚Äúsi DB falla, vuelvo a CSV como verdad‚Äù.</div>
            </div>
            <div class="epic">
                <div class="epic-title">Epic M1.2 ‚Äî Idempotencia y Deduplicaci√≥n</div>
                signal_key determin√≠stico, Unique index, Logger upsert.
                <div class="dod-box">Re-ejecutar scheduler no duplica se√±ales.</div>
            </div>
            <div class="epic">
                <div class="epic-title">Epic M1.3 ‚Äî Scheduler Hardening</div>
                Lock anti doble scheduler, Retries/backoff, Persistencia last run.
                <div class="dod-box">Tras crash/redeploy, vuelve solo sin inflar logs.</div>
            </div>
            <div class="epic">
                <div class="epic-title">Epic M1.4 ‚Äî Evaluator Reproducible</div>
                Reglas documentadas, Audit trail de evaluaci√≥n.
                <div class="dod-box">Cada WIN/LOSS es explicable y reproducible.</div>
            </div>
        </div>

        <div class="milestone">
            <div class="milestone-header">
                <div class="milestone-title">M2 ‚Äî Seguridad SaaS-Ready</div>
                <span class="milestone-goal">Objetivo: que no parezca un panel abierto y que el comprador conf√≠e.</span>
            </div>
            <div class="epic">
                <div class="epic-title">Epic M2.1 ‚Äî Auth real (Supabase/Clerk)</div>
                Login Google/Email, Middleware JWT en backend.
                <div class="dod-box">Nada importante funciona sin auth en producci√≥n.</div>
            </div>
            <div class="epic">
                <div class="epic-title">Epic M2.2 ‚Äî Multi-tenancy ‚Äúlite‚Äù</div>
                user_id en signals, evaluations, configs, paper. Queries scopiadas.
                <div class="dod-box">Usuario A jam√°s puede leer/escribir datos de B.</div>
            </div>
            <div class="epic">
                <div class="epic-title">Epic M2.3 ‚Äî Rate limiting y Cost Control</div>
                L√≠mites PRO LLM, Mensajes UI claros.
                <div class="dod-box">No puedes ‚Äúfundirte‚Äù el LLM con spam.</div>
            </div>
            <div class="epic">
                <div class="epic-title">Epic M2.4 ‚Äî Secrets & Hygiene</div>
                Config validation, No logs secretos, CORS seguro.
                <div class="dod-box">Un comprador puede desplegar sin adivinar variables.</div>
            </div>
        </div>

        <div class="milestone">
            <div class="milestone-header">
                <div class="milestone-title">M3 ‚Äî Monetizaci√≥n Demostrable</div>
                <span class="milestone-goal">Objetivo: que el comprador vea ‚Äúpuedo cobrar ma√±ana‚Äù.</span>
            </div>
            <div class="epic">
                <div class="epic-title">Epic M3.1 ‚Äî Pricing + Gating</div>
                Stripe Checkout (test), Webhook backend, Bloqueo UI features.
                <div class="dod-box">Checkout test cambia plan en DB y el producto reacciona.</div>
            </div>
            <div class="epic">
                <div class="epic-title">Epic M3.2 ‚Äî Entitlements Definidos</div>
                Validaci√≥n server-side del plan.
                <div class="dod-box">No hay ‚Äúbypass‚Äù trivial de plan.</div>
            </div>
        </div>

        <div class="milestone">
            <div class="milestone-header">
                <div class="milestone-title">M4 ‚Äî Paper Trading</div>
                <span class="milestone-goal">Objetivo: el ‚Äúwow‚Äù sin riesgo legal.</span>
            </div>
            <div class="epic">
                <div class="epic-title">Epic M4.1 ‚Äî Modelos Paper</div>
                Tablas paper_wallets, paper_orders.
                <div class="dod-box">Puedes simular ‚Äúentrar‚Äù en una se√±al y ver resultado.</div>
            </div>
            <div class="epic">
                <div class="epic-title">Epic M4.2 ‚Äî Motor de Ejecuci√≥n Paper</div>
                Bot√≥n Simulate, Cierre autom√°tico por Evaluator, C√°lculo PnL.
                <div class="dod-box">Paper orders se eval√∫an de forma autom√°tica.</div>
            </div>
            <div class="epic">
                <div class="epic-title">Epic M4.3 ‚Äî UI Paper Trading</div>
                Bot√≥n en detalle se√±al, P√°gina Balance/PnL simple.
                <div class="dod-box">Un usuario entiende paper en 30 segundos.</div>
            </div>
        </div>

        <div class="milestone">
            <div class="milestone-header">
                <div class="milestone-title">M5 ‚Äî Admin Panel</div>
                <span class="milestone-goal">Objetivo: ‚ÄúMission Control‚Äù operacional.</span>
            </div>
            <div class="epic">
                <div class="epic-title">Epic M5.1 ‚Äî /admin (Role Admin)</div>
                M√©tricas: usuarios, se√±ales, win/loss, costes LLM, estado scheduler.
                <div class="dod-box">Un comprador ve control operacional sin tocar c√≥digo.</div>
            </div>
        </div>

        <div class="milestone">
            <div class="milestone-header">
                <div class="milestone-title">M6 ‚Äî Packaging de Venta</div>
                <span class="milestone-goal">Objetivo: convertir el proyecto en activo transaccionable.</span>
            </div>
            <div class="epic">
                <div class="epic-title">Epic M6.1 ‚Äî Data Room</div>
                README buyer-ready, Setup local/prod, Runbook, Arquitectura.
                <div class="dod-box">Un tercero lo levanta sin hablar contigo.</div>
            </div>
            <div class="epic">
                <div class="epic-title">Epic M6.2 ‚Äî Seed Data / Demo Mode</div>
                Script seed_db.py con 30 d√≠as de datos realistas.
                <div class="dod-box">Nunca se ve vac√≠o reci√©n instalado.</div>
            </div>
            <div class="epic">
                <div class="epic-title">Epic M6.3 ‚Äî Legal B√°sico & Video</div>
                Terms, Privacy, Risk Disclosure, Demo Video 2-3 min.
                <div class="dod-box">Baja miedo legal y permite listar r√°pido.</div>
            </div>
        </div>
    </div>

    <div class="card">
        <div class="section-header">
            <h2 class="section-title">üõ†Ô∏è Backlog Ejecutable (Tickets Numerados)</h2>
        </div>
        
        <div class="backlog-group">
            <h3>A. Reality & Alignment</h3>
            <div class="ticket-item"><input type="checkbox" class="ticket-check"><span class="ticket-id">A-01</span> Matriz Implemented/Partial/Planned</div>
            <div class="ticket-item"><input type="checkbox" class="ticket-check"><span class="ticket-id">A-02</span> Demo Path oficial + checklist de demo</div>
            <div class="ticket-item"><input type="checkbox" class="ticket-check"><span class="ticket-id">A-03</span> Kill List de claims</div>
        </div>

        <div class="backlog-group">
            <h3>B. DB & Core Hardening</h3>
            <div class="ticket-item"><input type="checkbox" class="ticket-check"><span class="ticket-id">B-01</span> Consolidar schema DB + Alembic migrations</div>
            <div class="ticket-item"><input type="checkbox" class="ticket-check"><span class="ticket-id">B-02</span> Definir Signal + Evaluation schema final</div>
            <div class="ticket-item"><input type="checkbox" class="ticket-check"><span class="ticket-id">B-03</span> Eliminar CSV como runtime truth</div>
            <div class="ticket-item"><input type="checkbox" class="ticket-check"><span class="ticket-id">B-04</span> signal_key determin√≠stico + unique index</div>
            <div class="ticket-item"><input type="checkbox" class="ticket-check"><span class="ticket-id">B-05</span> Logger idempotente (upsert)</div>
            <div class="ticket-item"><input type="checkbox" class="ticket-check"><span class="ticket-id">B-06</span> Scheduler lock anti doble instancia</div>
            <div class="ticket-item"><input type="checkbox" class="ticket-check"><span class="ticket-id">B-07</span> Retries/backoff/timeouts</div>
            <div class="ticket-item"><input type="checkbox" class="ticket-check"><span class="ticket-id">B-08</span> /health /ready /status endpoints</div>
            <div class="ticket-item"><input type="checkbox" class="ticket-check"><span class="ticket-id">B-09</span> Evaluator audit trail</div>
        </div>

        <div class="backlog-group">
            <h3>C. Security SaaS-Ready</h3>
            <div class="ticket-item"><input type="checkbox" class="ticket-check"><span class="ticket-id">C-01</span> Integrar Auth (Supabase/Clerk) en web</div>
            <div class="ticket-item"><input type="checkbox" class="ticket-check"><span class="ticket-id">C-02</span> Middleware JWT en FastAPI + scopes</div>
            <div class="ticket-item"><input type="checkbox" class="ticket-check"><span class="ticket-id">C-03</span> user_id en tablas core</div>
            <div class="ticket-item"><input type="checkbox" class="ticket-check"><span class="ticket-id">C-04</span> Scoping de queries por user_id</div>
            <div class="ticket-item"><input type="checkbox" class="ticket-check"><span class="ticket-id">C-05</span> Rate limiting endpoint PRO</div>
            <div class="ticket-item"><input type="checkbox" class="ticket-check"><span class="ticket-id">C-06</span> CORS prod + headers seguridad</div>
        </div>

        <div class="backlog-group">
            <h3>D. Monetizaci√≥n</h3>
            <div class="ticket-item"><input type="checkbox" class="ticket-check"><span class="ticket-id">D-01</span> P√°gina Pricing</div>
            <div class="ticket-item"><input type="checkbox" class="ticket-check"><span class="ticket-id">D-02</span> Stripe Checkout test mode</div>
            <div class="ticket-item"><input type="checkbox" class="ticket-check"><span class="ticket-id">D-03</span> Webhook Stripe update plan</div>
            <div class="ticket-item"><input type="checkbox" class="ticket-check"><span class="ticket-id">D-04</span> Paywall + entitlements server-side</div>
        </div>

        <div class="backlog-group">
            <h3>E. Paper Trading</h3>
            <div class="ticket-item"><input type="checkbox" class="ticket-check"><span class="ticket-id">E-01</span> DB models paper_wallets, paper_orders</div>
            <div class="ticket-item"><input type="checkbox" class="ticket-check"><span class="ticket-id">E-02</span> Endpoint ‚Äúsimulate trade from signal‚Äù</div>
            <div class="ticket-item"><input type="checkbox" class="ticket-check"><span class="ticket-id">E-03</span> Motor PnL + fees + pnl_r</div>
            <div class="ticket-item"><input type="checkbox" class="ticket-check"><span class="ticket-id">E-04</span> Integraci√≥n evaluator con paper orders</div>
            <div class="ticket-item"><input type="checkbox" class="ticket-check"><span class="ticket-id">E-05</span> UI: bot√≥n Simulate + vista Paper</div>
            <div class="ticket-item"><input type="checkbox" class="ticket-check"><span class="ticket-id">E-06</span> KPIs paper: PnL 7d / Winrate paper</div>
        </div>

        <div class="backlog-group">
            <h3>F. Admin Panel</h3>
            <div class="ticket-item"><input type="checkbox" class="ticket-check"><span class="ticket-id">F-01</span> Role admin + route /admin</div>
            <div class="ticket-item"><input type="checkbox" class="ticket-check"><span class="ticket-id">F-02</span> M√©tricas operativas b√°sicas</div>
            <div class="ticket-item"><input type="checkbox" class="ticket-check"><span class="ticket-id">F-03</span> Estado scheduler + errores recientes</div>
        </div>

        <div class="backlog-group">
            <h3>G. Sale Packaging</h3>
            <div class="ticket-item"><input type="checkbox" class="ticket-check"><span class="ticket-id">G-01</span> seed_db.py + demo mode</div>
            <div class="ticket-item"><input type="checkbox" class="ticket-check"><span class="ticket-id">G-02</span> README buyer-ready + runbook</div>
            <div class="ticket-item"><input type="checkbox" class="ticket-check"><span class="ticket-id">G-03</span> Terms/Privacy/Disclosure</div>
            <div class="ticket-item"><input type="checkbox" class="ticket-check"><span class="ticket-id">G-04</span> Demo video + screenshots</div>
            <div class="ticket-item"><input type="checkbox" class="ticket-check"><span class="ticket-id">G-05</span> ‚ÄúPost-sale opportunities‚Äù doc</div>
        </div>
    </div>

    <div class="card exit-criteria">
        <div class="section-header">
            <h2 class="section-title">üèÅ ‚ÄúExit Criteria‚Äù (Sale-Ready Checklist)</h2>
        </div>
        <ul>
            <li><strong>Producto:</strong> Login ok, Dashboard lleno (seed), Logs filtrables, Evaluations reproducibles, Paper Trading ok.</li>
            <li><strong>Robustez:</strong> DB verdad √∫nica, Idempotencia ok, Scheduler lock ok, Health endpoints ok.</li>
            <li><strong>Seguridad:</strong> Endpoints protegidos, Rate limiting PRO, Secrets gestionados.</li>
            <li><strong>Monetizaci√≥n:</strong> Stripe checkout test ok, Paywall server-side ok.</li>
            <li><strong>Venta:</strong> Data room completo, Legal b√°sico, Demo video listo.</li>
        </ul>
    </div>

</div>

<script>
    // Persistencia b√°sica para seguimiento
    document.querySelectorAll('.ticket-check').forEach((cb, idx) => {
        const id = 'tc_task_' + idx;
        cb.checked = localStorage.getItem(id) === 'true';
        cb.addEventListener('change', () => localStorage.setItem(id, cb.checked));
    });
</script>

</body>
</html>